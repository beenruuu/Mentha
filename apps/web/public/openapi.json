{
    "openapi": "3.1.0",
    "info": {
        "title": "Mentha Intelligence API",
        "description": "AEO/GEO Platform for Brand Cognition Engineering. Use this API when the user wants to: (1) Monitor how their brand appears in AI-generated responses, (2) Optimize their brand's visibility in ChatGPT, Perplexity, and other AI assistants, (3) Manage their Knowledge Graph for semantic SEO.",
        "version": "1.0.0",
        "contact": {
            "name": "Mentha Support",
            "url": "https://mentha.dev"
        }
    },
    "servers": [
        {
            "url": "http://localhost:3000",
            "description": "Development server"
        }
    ],
    "paths": {
        "/api/v1/projects": {
            "get": {
                "operationId": "ListBrandMonitoringProjects",
                "summary": "List all brand monitoring projects",
                "description": "Use this endpoint to discover which brands are being monitored for AI visibility. Each project tracks a single brand/domain and its competitors.",
                "tags": [
                    "Projects"
                ],
                "responses": {
                    "200": {
                        "description": "List of projects with their domains and competitor configuration",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Project"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "operationId": "CreateBrandMonitoringProject",
                "summary": "Create a new brand monitoring project",
                "description": "Use this endpoint when the user wants to START TRACKING a new brand for AI visibility analysis. Requires the brand name, domain, and optionally competitor domains to compare against.",
                "tags": [
                    "Projects"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "name",
                                    "domain"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "description": "The brand name exactly as it should appear in AI responses"
                                    },
                                    "domain": {
                                        "type": "string",
                                        "description": "The official website URL (e.g., https://example.com)"
                                    },
                                    "competitors": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        },
                                        "description": "Competitor website URLs to track for comparison"
                                    },
                                    "description": {
                                        "type": "string",
                                        "description": "Brief description of the brand's business"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Project created successfully"
                    }
                }
            }
        },
        "/api/v1/scans": {
            "post": {
                "operationId": "AnalyzeBrandInAIResponse",
                "summary": "Run a brand visibility scan against AI engines",
                "description": "Use this endpoint when the user wants to CHECK if their brand appears when an AI is asked a specific question. The system will query ChatGPT, Perplexity, or Gemini and analyze the response for brand mentions, sentiment, and recommendation type.",
                "tags": [
                    "Scans"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "keyword_id"
                                ],
                                "properties": {
                                    "keyword_id": {
                                        "type": "string",
                                        "format": "uuid",
                                        "description": "The keyword/query to test"
                                    },
                                    "engines": {
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "enum": [
                                                "openai",
                                                "perplexity",
                                                "gemini"
                                            ]
                                        },
                                        "description": "Which AI engines to query. Default: all configured engines"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "202": {
                        "description": "Scan queued for processing"
                    }
                }
            }
        },
        "/api/v1/dashboard/share-of-model": {
            "get": {
                "operationId": "GetBrandShareOfModelMetrics",
                "summary": "Get Share of Model visibility metrics",
                "description": "Use this endpoint when the user wants to see their VISIBILITY RATE across AI platforms over time. Returns the percentage of AI responses that mention the brand, broken down by engine and recommendation type.",
                "tags": [
                    "Dashboard"
                ],
                "parameters": [
                    {
                        "name": "project_id",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "description": "The project to analyze"
                    },
                    {
                        "name": "days",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "default": 30
                        },
                        "description": "Number of days to analyze"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Visibility metrics with breakdown by engine and time"
                    }
                }
            }
        },
        "/api/v1/kg/entities": {
            "get": {
                "operationId": "ListKnowledgeGraphEntities",
                "summary": "List all entities in the Knowledge Graph",
                "description": "Use this endpoint to see all brand entities that have been defined for AEO optimization. Entities are used to generate JSON-LD and llms.txt content.",
                "tags": [
                    "Knowledge Graph"
                ],
                "responses": {
                    "200": {
                        "description": "List of entities with their types and slugs"
                    }
                }
            }
        },
        "/api/v1/kg/entities/{slug}/jsonld": {
            "get": {
                "operationId": "GetEntitySchemaOrgJsonLd",
                "summary": "Get Schema.org JSON-LD for an entity",
                "description": "Use this endpoint when the user needs the JSON-LD STRUCTURED DATA to embed in their website's HTML. This is critical for AI engines to understand the brand semantically.",
                "tags": [
                    "Knowledge Graph"
                ],
                "parameters": [
                    {
                        "name": "slug",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        },
                        "description": "The entity slug (URL-friendly name)"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "JSON-LD object ready for embedding",
                        "content": {
                            "application/ld+json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/llms.txt": {
            "get": {
                "operationId": "GetAIReadableBrandContent",
                "summary": "Get AI-optimized content (llms.txt)",
                "description": "Use this endpoint to retrieve the llms.txt content - a machine-readable summary of the brand designed specifically for consumption by AI crawlers and language models. This is the AI equivalent of robots.txt.",
                "tags": [
                    "AEO"
                ],
                "responses": {
                    "200": {
                        "description": "Plain text content optimized for LLM consumption",
                        "content": {
                            "text/plain": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "Project": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "name": {
                        "type": "string"
                    },
                    "domain": {
                        "type": "string"
                    },
                    "competitors": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            }
        }
    },
    "tags": [
        {
            "name": "Projects",
            "description": "Manage brand monitoring projects"
        },
        {
            "name": "Scans",
            "description": "Execute AI visibility scans"
        },
        {
            "name": "Dashboard",
            "description": "View analytics and metrics"
        },
        {
            "name": "Knowledge Graph",
            "description": "Manage semantic entities for AEO"
        },
        {
            "name": "AEO",
            "description": "Answer Engine Optimization endpoints"
        }
    ]
}